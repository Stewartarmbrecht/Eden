
# Builds the ContentReactor text microservice resources

name: $(BuildID)
steps:

  # Build the APIs
  - task: ShellScript@2
    displayName: Run bash build script
    inputs:
      scriptPath: "text/build/build.sh"

  - task: PublishTestResults@2
    displayName: Publish Test Results
    inputs:
      testRunner: 'VSTest'
      testResultsFiles: '**/testresults.xml'
    condition: always()

  # Publish the `deploy` folder as an artifact
  - task: PublishBuildArtifacts@1
    displayName: Publish Deployment Scripts
    inputs:
      pathToPublish: web/deploy
      artifactName: deploy
      artifactType: container

      # Drop build artifact into staging directory for release
  - task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: '$(build.artifactstagingdirectory)'
      artifactName: webapp
      artifactType: container